<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[仿知乎广告植入]]></title>
    <url>%2F2017%2F12%2F01%2F%E4%BB%BF%E7%9F%A5%E4%B9%8E%E5%B9%BF%E5%91%8A%E6%A4%8D%E5%85%A5%2F</url>
    <content type="text"><![CDATA[23.30熄灯–&gt;上床–&gt;刷微博、知乎–&gt;00.30睡觉。这应该是我近几个月最常做的事了，刷微博对于我来说，能随时随地发现新鲜事，能作为饭后的谈资，知乎更像是支付宝里的蚂蚁森林，每次刷都会发现很有趣的东西，吸取其中的能量。前天夜晚，我也像往常一样刷着知乎，正当我困意十足，准备睡觉时，突然一个神奇的cell吸引了我的注意力。仔细一看，原来是知乎植入的广告，这种植入方式，真的是太有创意了emmmmmmmmm。所以我打算模仿一下 效果图： ​ 这种植入广告的方式真的很赞，仅用有限的区域，就能展示一个全屏的广告，很多用户可能会对这种cell很新奇，便会点击进去，就比如我emmmmmm demo地址：https://github.com/Liulinzhe17/ZhihuAds 正文：整体的思路还是很清晰的，就是一个tableview里有两种不同类型的tableviewcell，一种是内容cell，一种是广告cell，当广告cell可视的时候，其背景色设为透明，并且将tableview的背景设置成广告图片，当广告cell离开屏幕时，将tableview的背景视图设为nil即可。 其中要注意的一些点： 将广告cell 背景色改成透明 1adscell.backgroundColor=[UIColor clearColor]; tableviewcell的高度要根据内容自适应，仔细观察会发现知乎的内容简介最多不超过三行，所以我 设置了UIlabel最大行数。 1label.numberofLines=3; tableviewcell里的contentView中内容高度不固定的，要设置其上下左右约束。 123//cell高度随内容自适应_tableview.estimatedRowHeight=100;//估算内容高度_tableview.rowHeight=UITableViewAutomaticDimension; ​ 当广告cell进入屏幕时，将此时tableview的背景图片改成广告图片，当广告cell离开屏幕时，将背景图片置空即： 1234567//判断广告cell是否在屏幕上- (void)tableView:(UITableView *)tableView didEndDisplayingCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath&#123; if ([types[indexPath.section]intValue]==0) &#123; //移除广告背景图片 self.tableview.backgroundView=nil; &#125;&#125; 当点击广告cell时，要判断此时广告cell所处的坐标，然后广告图片从广告cell所处的位置出发，渐渐的扩大到整个屏幕。（PS：其实有更加好的做法，就是再添加两个掩盖层，一个往上收，一个往下收，这样效果会好一点，不会有图片被压缩的感觉） 123 //获取tableviewcell相对父视图的位置CGRect rectInTableView = [tableView rectForRowAtIndexPath:indexPath];CGRect location = [tableView convertRect:rectInTableView toView:[tableView superview]]; 结尾点击广告cell的处理还有一些问题，个人觉得应该是将广告cell扩大到整个屏幕，而不是添加一个子视图这种蠢操作。。。]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JPA 映射双向多对多的问题]]></title>
    <url>%2F2017%2F11%2F28%2FJPA%2F</url>
    <content type="text"><![CDATA[本文主要解决的问题：用jpa实现两张表（多对多关联）的时候碰到Expected ‘:’ instead of ‘t’的错误 以及一大堆的jackson errors 关于jpa怎么实现两个多对多的表之间的关联，网上已经有一大堆博客讲的非常详细了,可参考 详细版 https://www.cnblogs.com/lj95801/p/5011537.html 简约版 http://blog.csdn.net/lewis_007/article/details/53006602 例子学生实体 12345678910111213141516171819202122232425262728@Entitypublic class Student &#123; @Id private Integer stuId; private String name; @ManyToMany(cascade = CascadeType.ALL) @JoinTable(name = &quot;中间表的名字&quot;, joinColumns = &#123; @JoinColumn(name = &quot;stuId&quot;, referencedColumnName = &quot;stuId&quot;)&#125;, inverseJoinColumns = &#123; @JoinColumn(name = &quot;courseId&quot;, referencedColumnName = &quot;courseId&quot;)&#125;) private Set&lt;Course&gt; courses; public Student() &#123; &#125; public Set&lt;Course&gt; getCourses() &#123; return courses; &#125; public void setCourses(Set&lt;Course&gt; courses) &#123; this.courses = courses; &#125; ...other setters and getters&#125; 课程实体 12345678910111213141516171819202122232425@Entitypublic class Course &#123; @Id private Integer courseId; private String name; @ManyToMany(mappedBy = &quot;courses&quot;) private Set&lt;Student&gt; students; public Course() &#123; &#125; public Set&lt;Student&gt; getStudents() &#123; return students; &#125; public void setStudents(Set&lt;Student&gt; students) &#123; this.students = students; &#125; ...other setters and getters&#125; 控制器 123456@RequestMapping(value=&quot;/list&quot;, method=RequestMethod.GET)@ResponseBodypublic List&lt;Student&gt; list() &#123; List&lt;Student&gt; stu = stuService.findAll(); return stu;&#125; 当我用postman请求这个接口的时候，返回的是Expected ‘:’ instead of ‘t’，控制台也会出现以下错误： 123[jackson-databind-2.6.6.jar:2.6.6] at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:693) ~[jackson-databind-2.6.6.jar:2.6.6] at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:675) ~[jackson-databind-2.6.6.jar:2.6.6].....省略.... 原因为什么会出现这个问题呢？我们看看源码，很容易就发现当请求返回Student列表时，学生类里的courses属性会引用Course类，而Course类里students属性又会引用Student类，因此造成了循环引用。 解决办法用@JsonIgnoreJsonIgnore注解主要用于属性或者方法上，作用就是忽略属性或者方法，此处用在了getStudents（）方法上只需在课程实体类的 getStudents()方法上加一行代码,即： 1234@JsonIgnorepublic Set&lt;Student&gt; getStudents() &#123; return students;&#125; 结尾Stack Overflow大法好😄]]></content>
      <categories>
        <category>web</category>
      </categories>
      <tags>
        <tag>springboot</tag>
        <tag>jpa</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[误删了Assets.xcasetts]]></title>
    <url>%2F2017%2F09%2F23%2F%E8%AF%AF%E5%88%A0%E4%BA%86Assets-xcasetts%2F</url>
    <content type="text"><![CDATA[今天在删除文件的时候，一不小心手贱就把Assets.xcasetts删除了，淡定的我默默的打开了废纸篓，拖了回去🤷‍♀️，没想到，打开app后发现所有的图片都不显示了。。。 解决办法 1.打开废纸篓，将Assets.xcasetts放回原处 2.找到Assets.xcasetts所在的目录，将其移到桌面 3.回到xcode，new -&gt; File…-&gt; Resource -&gt;Asset Catalog 将其命名为Assets.xcasetts 4.退出xcode，把桌面上的Assets.xcasetts替换掉项目里新创建的Assets.xcasetts 5.你可以继续愉快的编程了😄 （如果还不行的话，那就只能把所有图片重新拖到新创建的Assets.xcasetts里了）]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>xcode</tag>
      </tags>
  </entry>
</search>
